{% extends 'base.html' %}

{% block title %}Sectoreats | Login {% endblock %}

{% block style %}
<link href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/css/bootstrap.min.css" rel="stylesheet">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.15.3/css/all.min.css">
<style>
    .max-w-sm {
        max-width: 24rem;
    }
    .password-wrapper {
        position: relative;
    }
    .password-wrapper .toggle-password {
        position: absolute;
        right: 10px;
        top: 50%;
        transform: translateY(-50%);
        cursor: pointer;
    }
</style>
{% endblock %}

{% block main %}
<main class="bg-white d-flex align-items-center justify-content-center min-vh-100">
    <div class="w-100 max-w-sm mx-auto text-center" style="margin-top: 50px;">
        <h1 class="h5 font-weight-bold mb-4" style="font-size: 4vh;">Log In</h1>
        
        {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
            {% for category, message in messages %}
                <div class="alert alert-{{ category }}" role="alert">
                    {{ message }}
                </div>
            {% endfor %}
        {% endif %}
        {% endwith %}

        <form method="POST" action="{{ url_for('login') }}">
            <input type="email" name="email" class="form-control mb-3" placeholder="Enter your email" style="height:8vh;border-radius: 20px;" required>
            
            <div class="password-wrapper mb-3">
                <input type="password" name="password" id="password" class="form-control" placeholder="Enter your password" style="height:8vh;border-radius: 20px;" required>
                <i class="fas fa-eye toggle-password" onclick="togglePassword('password')"></i>
            </div>
            
            <button type="submit" class="btn btn-dark btn-block mb-3">Continue</button>
        </form>

        <div class="d-flex align-items-center mb-3">
            <hr class="flex-grow-1">
            <span class="px-2 text-muted">or</span>
            <hr class="flex-grow-1">
        </div>
        
        <button class="btn btn-light btn-block mb-3 d-flex align-items-center justify-content-center">
            <img src="https://img.icons8.com/?size=48&id=17949&format=png" alt="Google logo" class="mr-2" width="20" height="20">
            Continue with Google
        </button>
        <button class="btn btn-light btn-block mb-3 d-flex align-items-center justify-content-center">
            <img src="https://upload.wikimedia.org/wikipedia/commons/f/fa/Apple_logo_black.svg" alt="Apple logo" class="mr-2" width="20" height="20">
            Continue with Apple
        </button>
        <div class="d-flex align-items-center mb-3">
            <hr class="flex-grow-1">
            <span class="px-2 text-muted">or</span>
            <hr class="flex-grow-1">
        </div>
        <button class="btn btn-light btn-block mb-3 d-flex align-items-center justify-content-center">
            <img src="https://img.icons8.com/?size=48&id=13019&format=png" alt="QR code icon" class="mr-2" width="20" height="20">
            Log in with QR code
        </button>
        <p class="text-muted small">
            By proceeding, you consent to get calls, WhatsApp or SMS/RCS messages, including by automated means, from SectorEats and its affiliates to the number provided.
        </p>
        <a href="{{url_for('signup')}}">New user? Sign Up</a>
    </div>
</main>

<script>
    function togglePassword(fieldId) {
        const field = document.getElementById(fieldId);
        const icon = field.nextElementSibling;
        if (field.type === "password") {
            field.type = "text";
            icon.classList.remove("fa-eye");
            icon.classList.add("fa-eye-slash");
        } else {
            field.type = "password";
            icon.classList.remove("fa-eye-slash");
            icon.classList.add("fa-eye");
        }
    }
</script>

<script src="https://code.jquery.com/jquery-3.5.1.slim.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.5.4/dist/umd/popper.min.js"></script>
<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.2/js/bootstrap.min.js"></script>
{% endblock %}
